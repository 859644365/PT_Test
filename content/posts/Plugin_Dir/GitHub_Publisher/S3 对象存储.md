---
share: "true"
---


# S3对象介绍
对象存储（Object-Based Storage），也可以叫做面向对象的存储，现在也有不少厂商直接把它叫做云存储。

说到对象存储就不得不提 Amazon，Amazon S3 (Simple Storage Service) 简单存储服务，是 Amazon 的公开云存储服务，与之对应的协议被称为 S3 协议，
目前 S3 协议已经被视为公认的行业标准协议，因此目前国内主流的对象存储厂商基本上都会支持 S3 协议。

Amazon S3是一种由亚马逊提供的对象存储服务，广泛用于在互联网上存储和检索数据。这个服务通过一个Web服务接口提供，该接口遵循REST架构原则，通常被称为S3 API。

关于S3协议的关键特点包括：

1. **对象存储**：S3使用“对象”来存储数据。每个对象包括数据本身（如文件内容）、一个全局唯一的标识符（Key）和元数据。
2. **存储桶（Buckets）**：S3中的数据存储在“桶”中，桶是用于组织和管理存储的顶级容器。
3. **安全性**：S3提供多种安全措施，包括ACL（访问控制列表）、IAM（身份和访问管理）策略、SSL/TLS加密和数据加密。
4. **持久性和可用性**：Amazon S3提供高持久性，确保数据不会因为系统错误而丢失。它还提供了多个存储级别，以优化成本和访问性能。
5. **RESTful API**：Amazon S3通过RESTful API提供服务，这意味着可以使用HTTP协议的标准方法（如GET, PUT, DELETE）来管理和访问存储在S3中的数据。
6. **可扩展性**：Amazon S3能够处理任何量级的数据存储需求，并提供了良好的扩展性，使其适用于各种规模的应用。
7. **成本效率**：S3按使用量收费，使得用户可以根据实际使用情况支付费用，无需事先投入大量资金。
8. **全球部署**：Amazon S3在全球多个区域提供服务，使得数据可以靠近用户存储，减少延迟和提高访问速度。


在 Amazon S3 标准下中，对象存储中可以有多个桶（Bucket），然后把对象（Object）放在桶里，对象又包含了三个部分：`Key`、`Data` 和`Metadata`
![Pasted image 20240129150811.png](%E4%BA%91%E5%AE%89%E5%85%A8/attachments/Pasted%20image%2020240129150811.png)

- Key 是指存储桶中的唯一标识符，例如一个 URL 为：https://teamssix.s3.ap-northeast-2.amazonaws.com/flag，这里的 teamssix 是存储桶 Bucket 的名称，/flag 就是 Key
    
- Data 就很容易理解，就是存储的数据本体
    
- Metadata 即元数据，可以简单的理解成数据的标签、描述之类的信息，这点不同于传统的文件存储，在传统的文件存储中这类信息是直接封装在文件里的，有了元数据的存在，可以大大的加快对象的排序、分类和查找。
    

操作使用 Amazon S3 的方式也有很多，主要有以下几种：

- AWS 控制台操作
- AWS 命令行工具操作
- AWS SDK 操作
- REST API 操作，通过 REST API，可以使用 HTTP 请求创建、提取和删除存储桶和对象。

## Bucket爆破
在不知道Bucket桶名称的情况下，可以爆破Bucket名称，类似于子域名爆破，不同点在于，子域名爆破根据响应码判断，Bucket名称爆破通过 响应内容判断
桶不存在的情况：  InvalidBucketName 和 NoSuchBucket
桶存在情况：一般是直接列出object（对象），另一个情况是 AccessDenied
这样通过返回内容的不同，就可以进行 Bucket 名称爆破了，知道 Bucket 名称后，Key 的爆破也就很容易了。


## Bucket 接管
Bucket接管（Bucket Takeover）是一种网络安全问题，主要发生在云存储服务（如Amazon S3）中。原理是这样的：

1. **子域指向无效的存储桶**：一个组织的子域通过CNAME记录指向一个云存储桶，但该存储桶并不存在或已被删除。
2. **存储桶名称空缺**：由于存储桶不存在，其名称在云服务中变成可用状态。
3. **攻击者注册存储桶**：攻击者可以注册同名的存储桶，从而接管原先指向的子域。
4. **内容控制和滥用**：一旦接管成功，攻击者可以控制子域指向的内容，可能用于恶意目的，如钓鱼攻击等。
    
防范措施包括定期监控DNS记录，确保所有指向云存储服务的子域都有效，并在删除存储桶时相应地更新DNS记录。
参考样例： [Bucket 接管 | T Wiki](https://wiki.teamssix.com/CloudService/S3/bucket-takeover.html)

### 拓展 CNAME 记录
CNAME记录（Canonical Name Record）在DNS（域名系统）中用于将一个域名映射到另一个域名。其主要作用如下：

1. **域名别名**：CNAME记录允许您为单个网站或服务创建多个域名别名。这意味着您可以拥有多个域名指向同一个地址。
2. **管理方便**：通过CNAME记录，您可以更方便地管理和更新子域。例如，如果您的服务器IP地址变更，只需更新主域名的A记录，所有使用CNAME的子域名都会自动更新。
3. **第三方服务整合**：CNAME常用于将域名指向第三方服务（如CDN、云存储服务）而不需要知道服务的实际IP地址。
4. **负载均衡和故障转移**：在一些高级的DNS管理中，CNAME记录可用于负载均衡和故障转移策略。